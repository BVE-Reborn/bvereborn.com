{{#> page active="tools" title="File Validator" }}
    <script>
        function submit() {
            const start = performance.now();
            $.ajax({
                type: "POST",
                url: "/api/validate-file",
                data: {
                    contents: $( "#inputBox" ).val(),
                    kind: $( "#fileKindSelect" ).val(),
                },
                success: function ( result ) {
                    $( "#outputBox" ).html( result.contents )
                    $( "#errorBox" ).html( result.warnings )
                    $( "#timeProcess" ).html( result.time.toFixed(3) )
                    const end = performance.now();
                    $( "#timeReq" ).html( ((end - start) / 1000).toFixed(3) )
                }
            })
        }
    </script>
    <div class="row justify-content-center align-items-center">
        <div class="col-12 col-lg-5">
            <div class="text-center">
                <h2>Source</h2>
            </div>
            <textarea class="px-2 py-1" id="inputBox" style="min-height: 450px; width: 100%"></textarea>
        </div>
        <div class="col-6 col-lg-2">
            <select id="fileKindSelect" class="form-control mb-3">
                <option value="b3d">B3D Model</option>
                <option value="csv">CSV Model</option>
                <option value="animated">Animated Model</option>
                <option value="functionscript">Function Script</option>
                <option value="traindat">Train.dat</option>
                <option value="extensions">Extensions.cfg</option>
            </select>
            <button type="button" class="btn btn-primary mx-auto d-block" onclick="submit()">
                Parse
            </button>
        </div>
        <div class="col-12 col-lg-5">
            <div class="text-center">
                <h2>Parsed</h2>
            </div>
            <div class="border border-dark overflow-auto px-2 py-1" id="outputBox" style="min-height: 450px; max-height: 450px"></div>
        </div>
        <div class="col-12 text-center">
            <p class="mb-0">Processing time: <span id="timeProcess">0.0</span>s</p>
            <p>Total time: <span id="timeReq">0.0</span>s</p>
        </div>
        <div class="col-12 col-lg-8">
            <div class="text-center">
                <h2>Errors</h2>
            </div>
            <div class="border border-dark overflow-auto px-2 py-1" id="errorBox" style="min-height: 200px; max-height: 200px"><</div>
        </div>
    </div>
{{/page}}
